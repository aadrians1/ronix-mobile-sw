LIST P=16C84		;tone generator for freking
TIME_1		EQU	3CH
TIME_2		EQU	3CH

RTCC		EQU	01h
;OPTION		EQU	01h	;(81h)	10001111
STATUS		EQU	03h
PORTA		EQU	05h
TRISA		EQU	05h
PORTB		EQU	06h
TRISB		EQU	06h
INTCON		EQU	0Bh	;	10100000

WRB		EQU	0Ch
REB		EQU	0Dh
CNTCIKL		EQU	0Eh
TIME		EQU	0Fh
FRE_T		EQU	10H	;SET RTCC
FRE_1		EQU	11H	;SET 1st DIVISOR
FRE_2		EQU	12H	;SET 2st DIVISOR
FRE_M		EQU	13H	;SET MASK FOR 2st CLOCK (IF 1 THEN DISABLED)
FRE_1A		EQU	14H	;TMP FOR 1st CLOCK
FRE_2A		EQU	15H	;TMP FOR 2st CLOCK
MASK1		EQU	16H
MASK2		EQU	17H

	ORG	0
	GOTO	INI_P

	NOP
	NOP
	NOP
	NOP
	MOVFW	FRE_T
	MOVWF	RTCC
	MOVLW	B'10100000'
	MOVWF	INTCON	

	DECFSZ	FRE_1A,1
	GOTO	CON_
	MOVFW	FRE_1
	MOVWF	FRE_1A

	BTFSC	PORTB,3
	GOTO	P_CLR1
	BSF	PORTB,3
	GOTO	CON_
P_CLR1	BCF	PORTB,3

CON_	BTFSC	FRE_M,0	;IF =0 THEN CLOCK ON
	GOTO	CON_2
	DECFSZ	FRE_2A,1
	GOTO	CON_2
	MOVFW	FRE_2
	MOVWF	FRE_2A

	BTFSC	PORTB,4
	GOTO	P_CLR2
	BSF	PORTB,4
	GOTO	CON_2
P_CLR2	BCF	PORTB,4

CON_2	RETFIE



;	MOVLW	32
;	MOVWF	STATUS
;	MOVLW	0
;	MOVWF	TRISB
;	MOVWF	STATUS


INI_P	CLRWDT
	MOVLW	B'10001111'
	OPTION
	MOVLW	0
	MOVWF	PORTA
	MOVWF	PORTB
	TRIS	TRISA
	TRIS	TRISB
	MOVLW	B'10100000'
	MOVWF	INTCON
SLP_	CLRWDT
	GOTO	SLP_




end
