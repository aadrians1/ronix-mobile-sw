LIST P=16C84		;tone generator for freking
TIME_1		EQU	3CH
TIME_2		EQU	3CH

STATUS		EQU	03h
PORTB		EQU	06h
TRISB		EQU	06h

WRB		EQU	0Ch
REB		EQU	0Dh
CNTCIKL		EQU	0Eh
TIME		EQU	0Fh
TIME2		EQU	10H
FRE_1		EQU	11H	;TMP REG
FRE_2		EQU	12H	;TMP REG
VFRE_1		EQU	13H
VFRE_2		EQU	14H
TIMEB		EQU	15H
MASK1		EQU	16H
MASK2		EQU	17H

	ORG	0
	NOP
	NOP
	NOP
	NOP
	NOP
	MOVLW	32
	MOVWF	STATUS
	MOVLW	0
	MOVWF	TRISB
	MOVWF	STATUS

	MOVLW	0F0H
	MOVWF	MASK1
	MOVLW	0FH
	MOVWF	MASK2

	MOVLW	80H
	MOVWF	VFRE_1
	MOVLW	55H
	MOVWF	VFRE_2


BEGIN_B	MOVLW	0FFH
	MOVWF	TIMEB
BEEP	DECFSZ	FRE_1,1
	GOTO	N_NOP	
	MOVFW	VFRE_1
	MOVWF	FRE_1
	MOVFW	PORTB
	ANDLW	1
	IORWF	PORTB,1	
	GOTO	NBEEP
N_NOP	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
NBEEP	DECFSZ	FRE_2,1
	GOTO	N1_NOP	
	MOVFW	VFRE_2
	MOVWF	FRE_2
	MOVFW	PORTB
	ANDLW	2
	IORWF	PORTB,1	
	GOTO	N2_NOP
N1_NOP	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
	NOP
N2_NOP	DECFSZ	TIMEB,1
	GOTO	BEEP

	MOVLW	0
	MOVWF	PORTB
	CALL	TML
	GOTO	BEEP
;----------------------TML---------------------------------------------------
TML	MOVLW	TIME_2
	MOVWF	TIME
LL1	MOVLW	05h
	MOVWF	TIME2
LL2	DECFSZ	TIME2,1
	GOTO	LL2	
	DECFSZ	TIME,1
	GOTO	LL1
	RETURN	
;----------------------TM----------------------------------------------------
TM	MOVLW	TIME_1
	MOVWF	TIME
TTTM	DECFSZ	TIME,1
	GOTO	TTTM
	RETURN
end
