<HTML>

<HEAD>
<TITLE>Модемы</TITLE>
</HEAD>

<BODY BACKGROUND="" BGCOLOR="#ffffff" TEXT="#000000" LINK="#0000ff" VLINK="#800080" ALINK="#ff0000">
<font face="Times New Roman">
<CENTER><FONT COLOR=ff0000 SIZE="7"><B>BEPCTAK</B></FONT><BR>
<b><FONT COLOR=#0000ff SIZE="+1">Модемы</FONT></b><BR></CENTER>
<CENTER>(C) Master A. Pixel (SPY FOX)</CENTER><BR>

<TABLE BGCOLOR="#80ff80" WIDTH=40%><TR><TD>&nbsp;<img src="internal-gopher-text" tppabs="http://www.chat.ru/~sly_fox/internal-gopher-text"> Модемы</TD></TR></TABLE>
<OL>
<LI><img src="internal-gopher-index" tppabs="http://www.chat.ru/~sly_fox/internal-gopher-index"> <a href="#1301_1">ПРАВИЛЬНОЕ</a> <I> подключенние модема к телефонной линии</I>
<LI><img src="internal-gopher-index" tppabs="http://www.chat.ru/~sly_fox/internal-gopher-index"> <a href="#1301_2">НАСТРОЙКА</a> <I> модема для работы на плохой (российской) линии</I>
<LI><img src="internal-gopher-index" tppabs="http://www.chat.ru/~sly_fox/internal-gopher-index"> <a href="#1301_3">ПОТУГИ</a> <I> улучшения коннекта</I>
</OL>
<TABLE BGCOLOR="#55aaff" WIDTH=40%><TR><TD>&nbsp;Прочее</TD></TR></TABLE>
<OL>
<LI><img src="internal-gopher-index" tppabs="http://www.chat.ru/~sly_fox/internal-gopher-index"> <a href="#1301_4">КОМАНДЫ</a> <I> Hayes-совместимых модемов (на примере US Robotics Sportster)</I><P>
</OL>
<HR>
<A NAME="1301_1"></A>
<TABLE BGCOLOR="#c0c0c0" WIDTH=40%><TR><TD>&nbsp;<FONT COLOR=#ffffff> 1. Правильное подключение модема к линии</FONT></TD></TR></TABLE>
&nbsp;&nbsp;Как ни странно, большинство модемов в вартирах подключены неправильно. Во многих
случаях это является причиной плохой связи или низкой скорости. Правильное подключение помогает
иногда значительно улучшить качество связи.<BR>
&nbsp;&nbsp;У всех типов модемов сзади имеется две розетки стандарта AT&T, помеченные примерно
как LINE и PHONE. Назначение первой - подключение линии, а второй - телефона. Неработающий модем
представляет собой прозрачное устройство, т.е. реле внутри него напрямую соединяет контакты
обеих розеток, позволяя телефону нормально работать, пока модемом не пользуются. Когда
модем активируется ("снимает трубку"), реле отключает розетку LINE от розетки PHONE, и подключает
схемы модема на линию. Таким образом, дальнейшая линия отсекается, и состояние телефона и линии никак
не влияет на работу модема. На самом деле модем обычно неправильно подключат как параллельный
телефон, а розетку PHONE или вообще не используют, или подключают телефон на столе рядом
с компьютером (у вас так?). Тем самым при работе модема он отключает только один телефон, а все
остальные аппараты в квартире остаются на линии. Это и является причиной плохого соединения. Дело
в том, что телефонные аппараты имеют помехоподавительные конденсаторы, всегда подключенные
на линию, устраняющие неприятные щелчки и трески при разговоре, но негативно влияющие
на цифровую связь. Также к линии оказывается постоянно подключена звонковая цепь,
сосоящая из конденсатора и катушки звонка. При плавном изменении постоянного напряжения
в линии в течение сеанса связи, эта цепь вносит фазовые искажения сигнала, влияющие на
устойчивость всех современных протоколов (использующих фазовую модуляцию). Вносит свою
отрицательную лепту и лишняя разветвленность проводки, набирающая дополнительные помехи.<BR>
&nbsp;&nbsp;Таким образом, становится ясно, что правильное подключение модема должно обеспечивать
отключение всех имемеющихся на линии телефонных аппаратов. Модем должен быть самым
первым устройством на линии, включенной в розетку LINE. До этой розетки к линии ничего не
должно быть подключено. Вся остальная квартирная телефонная проводка вместе со всеми
телефонными аппаратами должна быть включена в розетку PHONE.<BR>
&nbsp;&nbsp;Дальнейшее улучшение линии следует производить заменой обычной телефонной
лапши, ужасной с точки зрения помехозащищенности и фазовой стабильности, на витую пару. Это
отностится только к части проводки от распаячного щитка до розетки LINE модема. Проводка от
розетки PHONE может быть любой. Витую пару можно достать на телефонной станции или около
строящихся телефонных станций найти кусок телефонного кабеля и распороть его. Кабель состоит
из пучка витых пар. Желательно толко скрутить пару немного сильнее. Для этого один ее конец
привязывают, а второй зажимают в патрон ручной дрели. Электродрель не годится, трудно контролировать
процесс закрутки и можно оборвать пару. Проводку прокладывают от телефонного щитка. Телефонная
распаячная коробка имеет 10 пар клемм, а квартир на этаже обычно по 4, поэтому коробки ставят не на
каждом этаже. Найдите свою "лапшу" и продерните ее в щитке для того, чтобы найти свою коробку.
Это удобно делать с напарником. Если коробка стоит прямо на вашем этаже, вам повезло - чем короче
проводка, тем меньше помех. Витую пару прокладывают вдали от силовых проводок по кратчайшему пути.
По всей длине не должно быть сруток. Если же провод пришлось сращивать, скрутки следует пропаять.
Разговорный ток в телефонной линии довольно большой (до 50 мА), поэтому все соединения должны быть
пропаяны, иначе из-за окисления они станут причиной шорохов и тресков, что пагубно влияет на качество связи.<BR>
&nbsp;&nbsp;К сожалению, между АТС даже по Москве установлена доисторическая аппаратура уплотнения, не
пропускающая положеной полосы частот и вносящая безобразное количество помех и искажений. К счастью,
кроссировка осуществляется каждый раз по-разному, так что перезвон часто радикально улучшает связь.<BR>
&nbsp;&nbsp;В заключение просьба к людям, раотающим в лаборатории и имеющим измеритель АЧХ или хотя-бы ЗГ и вольтиетр
переменного тока и два телефона на линиях. Снимите АЧХ связи и параметры уровней сигнала, звоня с одного
телефона на другой. Насколько разительно они отличаются раз от разу? Чем это можно объяснить? Как это увязать
с тем, что существуют определенные стандарты? Кто отвечает за их соблюдение? (да и как можно можно обеспечить
верхнюю частоту 3 кГц, когда уплотнение использует частоты 3.8/4.2/4.6... кГц и фильтр второго порядка?). Вот такая блин телефония...
<P>

<A NAME="1301_2"></A>
<TABLE BGCOLOR="#c0c0c0" WIDTH=40%><TR><TD>&nbsp;<FONT COLOR=#ffffff> 2. Настройка модема на плохих линиях</FONT></TD></TR></TABLE>
&nbsp;&nbsp;Модемы типа US Robotics Sportster и им подобные не имеют, к сожалению, специальной настройки
на праметры приема/передачи а также измерения этих параметров. Такими возможностями обладают
модемы Inpro, а также сотовые модемы Zyxel и Motorolla. Однако команды и регистры таких настроек
специфичны для разных моделей и не совпадают. Они подробно описаны в инструкциях к модемам.<BR>
&nbsp;&nbsp;Все, что можно сделать для простых модемов под Win95, это отменить реагирование
на потерю несущей. Дело в том, что для российских линий типично пропадание сигнала на большое время
или резкие щелчки, после которых наступает заглыхание на 1..2 сек, нарушаюшие нормальное распознавание несущей модемом.
Время ожидания несущей задается в регистре S10 и измеряется в 1/10 сек. Однако значение 255
интерпретируется модемом как бесконечно долгое ожидание несущей (авось да появится). Неудобство
данного метода состоит в том, что при серьезном сбое связи или отключении удаленного модем а от
линии местный модем не выдает сообщение NO CARRIER и не прерывает связь автоматически.
Это приходится делать вручную. Для постоянного контроля линии рекомендуется оставлять звук
все время включеным, использовав команду М2. При этом, чтобы шипение не раздражало, громкость
надо оставить минимальную. Для внешних модемов, имеющих плавный регулятор громкости, это 
не является проблеммой. Однако внутрениие модемы иногда имеют чересчур большую громкость
даже на уровне L1. Я решил эту незадачу, обложив пищик своего модема ватой и накрыв поверх
половинкой яйца от киндер-сюрприза (подходит по диаметру). Также можно попробовать винные пробки
и баночки от фотопленки. Это исключает необходимость перепаивать плату модема. Громкость регулируется
количеством набитой ваты :)<BR>
&nbsp;&nbsp;Прослушивание работы модема на линии дает ощущение качества связи по количеству
ретрейнов (динных и коротких). Короткий ретрейн (пересогласование модемами параметров связи, когда
количество сбойных блоков данных превышает некоторый предел), длится около 1 секнды и звучит как
короткий тон. При коротком ретрейне модемы могут менять только скорость обмена. Некоторые
модемы могут пытаться и повысить скорость, если за длительное время не было ни одного сбойного блока.
Обычно такие модемы поддерживают уровень сбойных блоков на уровне 2...5%, оптимизируя
таким образом общую скорось обмена. Динный ретрейн проводится при потере несущей или приходе слишком
большого количества ошибок. Длится разное время, напоминает начальную установку связи (хэндшейк), и
при неудаче модет закончится обрывом связи. Большое количество динных ретрейнов (болье 1 в минуту) свидетельствует
о плохом качестве связи и требяет снижения скорости (возможно, ограничения ее вручную).<BR>
&nbsp;&nbsp;Причина этого в том, что в начальный момент времени модему все же удается установить
высокую скорость обмена, но оказывается, что он завышает свои возможности и в дальнейшем связь прерывается
бесконечной серией ретрейнов. Рано или позно одина из них окажется неудачной и связь будет
прервана. На практике замечено, что насильное ограничение скорости обмена зачастую дает
заметный выигрыш в общей производительности связи. Так, верные 9600 или 7200 на плохой линии 
дают более быстрый обмен, чем постоянно ретрейнящий 28800.<BR>
&nbsp;&nbsp;Кроме этого, неадаптированные модемы плохо распознают сигнал "занято". Гораздо
хуже, что иногда они не распознают диалтон (звук свободной линии перед набором номера). Если это
так, то следует изменить список реакций модема командой Х.<BR>
&nbsp;&nbsp; Все  изменяемые параметры удобнее всего прописать в строку инициализации модема.
К несчастью, Win95 поддерживает всего одну такую строку, хотя для разных каналов связи
желательно было бы иметь индивидуальные параметры. Эта стока доступна в "панели управления",
секция "модемы", кнопка "свойства", язычок "установка связи", кнопка "дополнительно".<BR>
&nbsp;&nbsp;<a href="#1301_4">Подробнее о командах модема</a>.
<P>

<A NAME="1301_3"></A>
<TABLE BGCOLOR="#c0c0c0" WIDTH=40%><TR><TD>&nbsp;<FONT COLOR=#ffffff> 3. Потуги улучшения коннекта</FONT></TD></TR></TABLE>
&nbsp;&nbsp;Существуют две известные мне возможности при прочих равных условиях выжиамать
из нашей убогой связи чуть большее.<BR>
&nbsp;&nbsp;Первая - народная примета, что перед последней цифрой набираемого номера следует выдержать
небольшую паузу. Это достигается включением запятой в набираемой номер. Я несколько расширил применение паузы,
основываясь на структуре АТС (на примере Москвы). Дело в том, что первые три цифры номера, указывающие
АТС, набираются на вашей станции, и таким образом она получается доступ к удаленной АТС. Последующие 4 цифры
набираются уже на удаленной станции (указывая конкретного абонета). При расстановке пауз следет учитывать, 
что старые АТС (особенно шаговые) любят потормозить, и набор для них
желательно перемежать запятыми. Это дает время произойти переходным процессам в оборудовании. 
Новые станции более шустрые, и поспевают хорошо соединять даже
при быстром наборе. Вы можете посмотреть станции в <a href="1302.htm" tppabs="http://www.chat.ru/~sly_fox/1302.htm">списке типов АТС Москвы</a>.
К примеру, ваша АТС
новая, а дальняя - старого типа. Тогда номер будет выглядеть примерно так: 123,4,5,6,,7. После третьей
цифры коммутацию продолжает удаленная старая АТС, которая должна иметь время, чтобы приготовиться
к набору. Перед последней тогда цифрой выжерживается увеличенная пауза. Если же виды АТС - наоборот,
номер будет выглядитm так: 1,2,3,456,7.<BR>

&nbsp;&nbsp;Второй способ улучшения связи был открыт случайно, и я пока не уверен, что он
будет действовать везде. Применяется, когда связь насолько плоха, что модемы затрудняются
даже провести хэндшейк. Набираем 8-гудок-PRE-1234567 (где PRE - код вашего города, Москва = 095). Механический голос ответит, что "неправильно набран номер".
Кладите трубку и ТУТ ЖЕ, не ждя ни секунды, диальте модемом. Применяя этот способ, я отмечаю вдвое более сильный
уровень приходящего сигнала, нежели обычно (основное затруднение связи у меня - как раз низкая громкость ответа).<BR>
&nbsp;&nbsp;Почему это действует, не знаю. Возможно, выход на межгород подключает какой-либо услилтель сигнала.
Или просто это оказывает существенную встряску всей их бесовской механике...Еще раз замечу, что диал следует делать
немедленно после повешения трубки. Пауза более 2 секунд фатальна. На второй диал также не действует.
<P>

<a name="1301_4"></a>
<TABLE BGCOLOR="#55aaff" WIDTH=40%><TR><TD><FONT COLOR="ffffff">&nbsp;Команды модемов US Robotics Sportster</font></TD></TR></TABLE>
<TABLE border=1>
<TR><TD>$</TD><TD>Показать список основных команд</TD></TR>
<TR><TD>A</TD><TD>Включить ответ вручную. Модем снимает трубку и отвечает на звонок.</TD></TR>
<TR><TD>A/</TD><TD>Выполнить последнюю команду еще раз. <B>Не требует префика АТ</B></TD></TR>
<TR><TD>AT</TD><TD>Префикс командной строки модема</TD></TR>
<TR><TD>Bx</TD><TD>0 - использовать V.22 для скорости 1.2 и V.21 для скорости 0.3<BR>
1 - использовать альтернативные протоколы Bell-212 и Bell-103 соответсвенно</TD></TR>
</TABLE>
....НЕДОПИСАНО....<P><HR><P>
<P>
<CENTER><a href="1000.html" tppabs="http://www.chat.ru/~sly_fox/1000.html">Назад</a>&nbsp;&nbsp;&nbsp;&nbsp;
<!--<a href="mailto:sipsik@chat.ru">sipsik@chat.ru</a></CENTER>-->
</font>
</BODY>

</HTML>
